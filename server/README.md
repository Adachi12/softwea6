# server side README

## 終了したタスク

### データベース構築

* 表の作成
    * 主キー・外部キーの設定
* データベースアクセス用のコーディング(C言語)
    * テストデータの取得・挿入・更新


## 予定しているタスク

### データベース構築

* データベースアクセス用のコーディング(C言語)
    * データベースアクセスの抽象化
    * 各関数で引数を受け取り，その内容によって処理をする．

### 通信(アプリケーション層)コーディング

* プロトコルはこちらで決めて，クライアント側にそのプロトコルを遵守してもらう
* クライアント側と話し合いながらコーディング

### 誕生日の処理

* ログイン後，そのユーザの誕生日を確認し，必要に応じてデータベースの中身を書き換える．


# 12 / 28 独断進行報告

* pdfファイルを1つにまとめた
* ビルドした後，binディレクトリに実行可能ファイルを格納するようにした
* データベースについてやらないといけないことを洗い出した↓

# データベースアクセスAPI

## 抽象化についてやること

* 引数でアクセス内容を受け取って，データベースへアクセスする方法を考える．
    * おそらくSQL文(文字列)を操作することで実現できると思われる．
    * どの表に，どのようなデータを入れるのか．これらを決定するために，関数の引数としてどのようなデータを受け取るのかを決定する

## クライアントからの要求

acceptやrejectは何か整数で置き換えることになると思われる．  
以下の状況に対応できるSQL文を書く．

### 手動ログイン

* IDとパスワードの照会
    * ユーザからIDとパスワードを受け取り，データベースの内容と一致するか確認
    * 一致すればaccept，一致しなければrejectを返す．
* 一致した場合は，誕生日の処理

### 自動ログイン

* 誕生日の処理

### 新規登録

* ユーザ名，パスワード，本名，性別，体重，身長，誕生日，メールアドレスの登録
    * IDはこちらが発行するやつ
    * テキトーに0から順番にIDを発行すればいいでしょう．

### ユーザ情報確認

* 性別，身長，体重，目標体重，目標期間の取得
    * ユーザIDを受け取り，上記のデータを返す．

### ユーザ情報変更

* ユーザ名，身長，体重，目標体重の変更
    * まずは，変更要請を請け負い，現在の情報を返す．
    * ユーザIDを受け取り，受け取ったデータに変更する．

### 記録確認

* 日付，走行開始時刻，走行距離，走行距離，消費カロリー
    * ユーザIDと一致するものを全て返す必要がある．
    * このとき，1ヶ月以上前のレコードは削除してしまう．
    * データが1つもなくても，ack．
    * 何かしらエラーがあった時のみrejectを返す．

### 手動アクティビティ追加

* 走行距離，運動時間，運動を開始した日時，消費カロリー，メモ
    * メモ...?
    * 実際のデータベースでは，USEDLOG\_TABLEの内容全てが含まれる．
    * これらのデータを受け取って，データを格納．成功すればack．

### パスワード変更

* 新しいパスワード
    * 受け取ったパスワードに書き換える．
    * 成功すればack．